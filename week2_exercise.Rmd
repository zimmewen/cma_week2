---
title: "week2_exercise"
author: "Wenke Zimmermann"
date: "2022-04-29"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Load the necessary libraries ###
```{r}
library(readr)        # to import tabular data (e.g. csv)
library(dplyr)        # to manipulate (tabular) data
library(ggplot2)      # to visualize data
library(udunits2)
library(sf)           # to handle spatial vector data
library(terra)        # To handle raster data
library(lubridate)    # To handle dates and times
```

## Task 1: Import your data
```{r}
# Import the downloaded csv #
wildschwein_BE <- read_delim("wildschwein_BE_2056.csv",",")

wildschwein_BE <- st_as_sf(wildschwein_BE, coords = c("E", "N"), crs = 2056, remove = FALSE)
```

#Note:
that this dataset is already converted to EPSG 2056
the coordinates are stored in the columns (E/N)
setting remove = FALSE preserves the original (E/N) columns, which come in handy later on


## Task 2: Getting an overview
Calculate the time difference between subsequent rows as described in the demo. You can calculate the time difference using the function difftime() in combination with lead().
- the function difftime() has an option units. Set this to secs to get the time difference in seconds
- use as.integer() to turn the output returned by difftime() into an integer.
- store the output in a new column (e.g. timelag)
```{r}
wildschwein_tempdiff <- mutate(wildschwein_BE, timelag = as.integer(difftime(lead(DatetimeUTC),DatetimeUTC, units = "sec")))

wildschwein_tempdiff
```

Now inspect your data in more detail. Try to answer the following questions:
- How many individuals were tracked?
- For how long were the individual tracked? Are there gaps?
- Were all individuals tracked concurrently or sequentially?
- What is the temporal sampling interval between the locations?
```{r}

#How many individuals
wildschwein_count <- wildschwein_BE %>%
  group_by(TierID) %>%
  summarize(count=n()
  )

wildschwein_count #3 Zeilen, d.h. drei Individuen

nrow(wildschwein_count) #3


#For how long were they tracked


```

